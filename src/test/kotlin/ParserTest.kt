import helper.stringFromBytes
import org.junit.jupiter.api.Test

import org.junit.jupiter.api.Assertions.*

internal class ParserTest {

    val inputStrings = listOf(
        "9F02060000000010009F03060000000000009F1A020643950508000480005F2A0206439A032202159C01009F37046CE6D0DA9F3501219F34034203009B02E8005A0967999989000002010F9F3303A068C89F3901055F34013182027800840BA0000000043060D05611119F10120210A0000F240000000000000000000000FF9F26085B666B4C072EA5B39F2701809F36020001571167999989000002010D2512220083550606",
        "DF040101DF3405A0000001529F22015ADF3314CC9585E8E637191C10FCECB32B5AE1B9D410B52DDF290101DF300101DF318180EDD8252468A705614B4D07DE3211B30031AEDB6D33A4315F2CFF7C97DB918993C2DC02E79E2FF8A2683D5BBD0F614BC9AB360A448283EF8B9CF6731D71D6BE939B7C5D0B0452D660CF24C21C47CAC8E26948C8EED8E3D00C016828D642816E658DC2CFC61E7E7D7740633BEFE34107C1FB55DEA7FAAEA2B25E85BED948893D07DF320103",
        "F124E110DF040102DF3405A0000003599F220103E210DF040102DF3405A0000003599F220104F224E310DF040102DF3405A0000003599F220105E410DF040102DF3405A0000003599F220107"
    )

    val brokenData =
        "9F02060000000010009F03060000000000009F1A020643950508000480005F2A0206439A032202159C01009F37046CE6D0DA9F3501219F34034203009B02E8005A0967999989000002010F9F3303A068C89F3901055F34013182027800840BA0000000043060D05611119F1083FFFF0210A0000F240000000000000000000000FF9F26085B666B4C072EA5B39F2701809F36020001571167999989000002010D2512220083550606"

    @Test
    fun testParser() {
        for (s in inputStrings) {
            val tagCollection = Parser(s).parseData()
            println("====================================================================")
            print(tagCollection)
            println("====================================================================")
        }
    }

    @Test
    fun testOnBrokenData() {
        val tagCollection = Parser(brokenData).parseData()
        //println(tagCollection)
    }

    @Test
    fun testBuilder() {
        for (s in inputStrings) {
            val tagCollection = Parser(s).parseData()
            val f55 = Builder(tagCollection).buildF55()
            println(f55.stringFromBytes() == s)
        }
    }
}